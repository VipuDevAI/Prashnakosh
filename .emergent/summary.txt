<analysis>**original_problem_statement:**
The user provided a zip file of an existing education governance application, Prashnakosh. After an initial analysis, the scope pivoted to building a brand-new, separate Super Admin dashboard from scratch.

**PRODUCT REQUIREMENTS:**
1.  **Super Admin Dashboard:** A new, from-scratch UI for governance.
    *   **School Management:** Full CRUD for schools.
    *   **User Management:** Full CRUD for users (Principals, HODs, Teachers, Students) per school, including bulk upload via CSV templates.
        *   **Teacher Onboarding:** Must include a single  and multiple .
        *   **Student Onboarding:** Must include  and .
    *   **Admin Settings:** CRUD for  and  under a selected school.
    *   **S3 Storage:** A UI to allocate and view S3 bucket configurations for each school.
2.  **Design & UX:**
    *   Implement a premium, modern design with multi-color gradients.
    *   Add a global Dark/Light theme toggle.
    *   Incorporate the round Prashnakosh logo and a standard footer (Â© 2025 All rights reserved and Powered by SmartGenEduX @2025) on all pages.
3.  **Data & Storage Policy (Non-Negotiable):**
    *   **Database-First:** The PostgreSQL database is the single source of truth. All business data (users, schools, exams, etc.) must be persisted.  must be removed or strictly mirror DB behavior.
    *   **No Demo Data:** All dashboards (especially Principal Analytics) must be driven by real data from the database, not mock/placeholder data.
    *   **S3 for All Files:** All file uploads (question papers, logos, reference materials) must go to S3. Default storage allocation per school is 100 GB.
4.  **Global Reference Library:**
    *   Super Admin can upload reference materials and past 10 years' question papers.
    *   These are globally accessible but read-only for Class 10 and 12 students.
5.  **Principal Analytics Dashboard:**
    *   Build a PowerBI-style interactive dashboard providing deep insights into student/teacher performance, exam stats, and class comparisons. Must use real data.

**User's preferred language**: English

**what currently exists?**
The agent successfully fixed critical environment and CSS styling issues, making the Prashnakosh application runnable. A brand-new Super Admin dashboard has been built from scratch, including pages for School, User, Wing/Exam, and S3 Storage configuration. The UI has been significantly enhanced with a premium design, featuring dark/light mode, gradients, the official logo, and a consistent footer. Teacher and student onboarding flows have been updated to include mandatory wing/subject and class/section fields, respectively. The backend schema and APIs have been updated to support these new requirements, including a global reference materials library.

**Last working item**:
*   **Last item agent was working:** Implementing **Phase A** of the user's data and storage policy. This involved creating the database schema (, ) and API endpoints () for the global reference material library. The agent also began removing demo data and adding the logo/footer to all dashboards.
*   **Status:** IN PROGRESS
*   **Agent Testing Done:** Y (via curl and screenshots for local environment)
*   **Which testing method agent to use?** both. The frontend needs screenshot verification for the new UI, and the backend needs curl/testing agent to validate the new APIs and the fix for the demo data issue.
*   **User Testing Done:** N

**All Pending/In progress Issue list**:
*   **Issue 1: Principal Dashboard Shows Demo Data (P0 - CRITICAL)**: The user has repeatedly flagged that the Principal Analytics dashboard uses mock/placeholder data instead of real data from the database. This is a non-negotiable blocker that breaks the single source of truth rule.
*   **Issue 2: Database Schema is Out of Sync (P0 - CRITICAL)**: The production database on Render is missing tables (, , , ). This has caused multiple deployment failures. The migration command 
> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/app/drizzle.config.ts' has not been executed in the deployment environment.

**Issues Detail:**
*   **Issue 1: Principal Dashboard Shows Demo Data**
    *   **Attempted fixes:** None. The agent has acknowledged the issue but has not yet investigated or fixed the Principal dashboard's data source.
    *   **Next debug checklist:**
        1.  Inspect  (or the relevant Principal dashboard file).
        2.  Identify the API endpoint it calls for analytics data.
        3.  Trace the backend logic for that endpoint to find where the mock data is being generated.
        4.  Rewrite the endpoint to query the PostgreSQL database for real user, exam, and score data.
        5.  Verify the fix with a screenshot showing analytics based on newly created test data.
    *   **Why fix this issue and what will be achieved with the fix?** This is the user's top priority. Fixing it will make the application's analytics useful and align with the core requirement of being data-driven.
    *   **Status:** NOT STARTED
    *   **Is recurring issue?** Y
    *   **Should Test frontend/backend/both after fix?** Both.
    *   **Blocked on other issue:** No.

*   **Issue 2: Database Schema is Out of Sync**
    *   **Attempted fixes:** The agent identified the issue and the 
> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/app/drizzle.config.ts' command but cannot execute it on the user's Render environment. The agent has advised the user to run it.
    *   **Next debug checklist:** The agent's next step should be to strongly remind the user that this action is required *by them* on their Render shell after every code push that modifies . Alternatively, propose adding the command to the build script in .
    *   **Why fix this issue and what will be achieved with the fix?** This will resolve the  errors on deployment and make the new features (Wings, Exams, Reference Materials) functional in production.
    *   **Status:** BLOCKED (requires user action)
    *   **Is recurring issue?** Y
    *   **Should Test frontend/backend/both after fix?** Backend.
    *   **Blocked on other issue:** No.

**In progress Task List**:
*   **Task 1: Complete Phase A - Reference Materials & Storage UI (P0)**
    *   **Where to resume:** The backend schema and APIs are ready. The next step is to build the UI within the Super Admin dashboard for uploading and managing reference materials and previous year's question papers.
    *   **What will be achieved with this?** This will complete the user-requested feature for a global content library for students.
    *   **Status:** IN PROGRESS
    *   **Should Test frontend/backend/both after fix?** Both.
    *   **Blocked on something:** Blocked by **Issue 2**, as it cannot be deployed without the database migration.

**Upcoming and Future Tasks**
*   **Upcoming Tasks:**
    *   **P1: Build Principal Analytics Dashboard:** After fixing the demo data issue, build the full PowerBI-style interactive dashboard as per user specifications.
    *   **P1: Integrate Super Admin Exams into HOD/Student Flows:** Update the HOD blueprint creation and Student mock test pages to use exams created by the Super Admin.
*   **Future Tasks:**
    *   **Phase B:** Fully switch to PostgreSQL and remove all  logic.
    *   **Phase C:** Integrate AWS S3 credentials and enable file uploads.
    *   Create a database seed script for the initial  user.
    *   Clean up and remove the old, obsolete admin pages under .
    *   Address the pre-existing TypeScript errors in the original codebase.

**Completed work in this session**
- **Environment and CSS Fix:** Resolved the initial server configuration and Tailwind CSS processing issues, making the app render correctly.
- **Super Admin Dashboard (Core):** Built the complete UI and backend for Schools, Users (including bulk upload), Settings (Wings/Exams), and S3 configuration.
- **Premium UI Redesign:** Implemented a new design with dark/light mode, gradients, glassmorphism, and smooth animations.
- **Branding Integration:** Added the Prashnakosh logo and a standardized footer to all dashboards.
- **Onboarding Logic:** Updated user creation and bulk upload to handle mandatory Wing/Subject for teachers and Class/Section for students.
- **Logout Functionality:** Fixed the sign-out process to correctly clear the session and redirect to the login page.
- **Backend Storage Parity:** Implemented missing CRUD methods for Wings and Exams in both  and .

**Earlier issues found/mentioned but not fixed**
*   **Issue 1: Pre-existing TypeScript Errors**
    *   **Debug checklist:** Run client/src/pages/admin/blueprint-policies.tsx(113,9): error TS2322: Type '{ title: string; subtitle: string; actions: Element; }' is not assignable to type 'IntrinsicAttributes & PageHeaderProps'.
  Property 'title' does not exist on type 'IntrinsicAttributes & PageHeaderProps'.
client/src/pages/admin/reference-library.tsx(182,9): error TS2322: Type '{ title: string; subtitle: string; actions: Element; }' is not assignable to type 'IntrinsicAttributes & PageHeaderProps'.
  Property 'title' does not exist on type 'IntrinsicAttributes & PageHeaderProps'.
client/src/pages/admin/user-bulk-upload.tsx(113,9): error TS2322: Type '{ title: string; subtitle: string; actions: Element; }' is not assignable to type 'IntrinsicAttributes & PageHeaderProps'.
  Property 'title' does not exist on type 'IntrinsicAttributes & PageHeaderProps'.
client/src/pages/chapters.tsx(50,24): error TS2802: Type 'Set<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
client/src/pages/practice.tsx(46,24): error TS2802: Type 'Set<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
client/src/pages/practice.tsx(48,11): error TS2802: Type 'Set<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/pg-storage.ts(77,14): error TS2420: Class 'PgStorage' incorrectly implements interface 'IStorage'.
  Type 'PgStorage' is missing the following properties from type 'IStorage': getReferenceMaterials, getReferenceMaterial, createReferenceMaterial, updateReferenceMaterial, softDeleteReferenceMaterial
server/pg-storage.ts(164,43): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { name: string | SQL<unknown> | Placeholder<string, any>; email: string | SQL<unknown> | Placeholder<string, any>; password: string | SQL<unknown> | Placeholder<...>; ... 16 more ...; deletedBy?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ active: boolean; name: string; email: string; password: string; role: "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent"; tenantId?: string | null | undefined; ... 12 more ...; deletedBy?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ name: string | SQL<unknown> | Placeholder<string, any>; email: string | SQL<unknown> | Placeholder<string, any>; password: string | SQL<unknown> | Placeholder<string, any>; ... 16 more ...; deletedBy?: string | ... 3 more ... | undefined; }'.
      Types of property 'subjects' are incompatible.
        Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'string | undefined'.
  Overload 2 of 2, '(values: { name: string | SQL<unknown> | Placeholder<string, any>; email: string | SQL<unknown> | Placeholder<string, any>; password: string | SQL<unknown> | Placeholder<...>; ... 16 more ...; deletedBy?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'active' does not exist in type '{ name: string | SQL<unknown> | Placeholder<string, any>; email: string | SQL<unknown> | Placeholder<string, any>; password: string | SQL<unknown> | Placeholder<string, any>; ... 16 more ...; deletedBy?: string | ... 3 more ... | undefined; }[]'.
server/pg-storage.ts(268,47): error TS2769: No overload matches this call.
  Overload 1 of 3, '(left: PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; ... 9 more ...; generated: undefined; }, {}, { ...; }>, right: SQLWrapper | ... 6 more ... | "long_answer"): SQL<...>', gave the following error.
    Argument of type 'string' is not assignable to parameter of type 'SQLWrapper | "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"'.
  Overload 2 of 3, '(left: Aliased<string>, right: string | SQLWrapper): SQL<unknown>', gave the following error.
    Argument of type 'PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; ... 9 more ...; generated: undefined; }, {}, { ...; }>' is not assignable to parameter of type 'Aliased<string>'.
      Type 'PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; ... 9 more ...; generated: undefined; }, {}, { ...; }>' is missing the following properties from type 'Aliased<string>': sql, fieldAlias
  Overload 3 of 3, '(left: never, right: unknown): SQL<unknown>', gave the following error.
    Argument of type 'PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; ... 9 more ...; generated: undefined; }, {}, { ...; }>' is not assignable to parameter of type 'never'.
server/pg-storage.ts(302,49): error TS2802: Type 'Map<string, { id: string; options: string[] | null; type: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; status: string | null; tenantId: string; ... 25 more ...; rejectionReason: string | null; }[]>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/pg-storage.ts(831,60): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { name: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 16 more ...; isApproved?: boolean | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ name: string; tenantId: string; grade: string; subject: string; totalMarks: number; isLocked?: boolean | null | undefined; lockedAt?: Date | null | undefined; lockedBy?: string | null | undefined; ... 10 more ...; isApproved?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ name: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 16 more ...; isApproved?: boolean | ... 3 more ... | undefined; }'.
      Types of property 'sections' are incompatible.
        Type '{ [x: number]: { name: string; marks: number; questionCount: number; questionType: string; difficulty?: unknown; chapters?: unknown; instructions?: unknown; }; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | ...' is not assignable to type 'SQL<unknown> | BlueprintSection[] | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: { name: string; marks: number; questionCount: number; questionType: string; difficulty?: unknown; chapters?: unknown; instructions?: unknown; }; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | ...' is not assignable to type 'SQL<unknown> | BlueprintSection[] | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: { name: string; marks: number; questionCount: number; questionType: string; difficulty?: unknown; chapters?: unknown; instructions?: unknown; }; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | ...' is not assignable to type 'BlueprintSection[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'BlueprintSection | undefined'.
  Overload 2 of 2, '(values: { name: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 16 more ...; isApproved?: boolean | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ name: string; tenantId: string; grade: string; subject: string; totalMarks: number; isLocked?: boolean | null | undefined; lockedAt?: Date | null | undefined; lockedBy?: string | null | undefined; ... 10 more ...; isApproved?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ name: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 16 more ...; isApproved?: boolean | ... 3 more ... | undefined; }[]'.
      Type '{ name: string; tenantId: string; grade: string; subject: string; totalMarks: number; isLocked?: boolean | null | undefined; lockedAt?: Date | null | undefined; lockedBy?: string | null | undefined; ... 10 more ...; isApproved?: boolean | ... 1 more ... | undefined; }' is missing the following properties from type '{ name: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 16 more ...; isApproved?: boolean | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(857,63): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { questionId: string | SQL<unknown> | Placeholder<string, any>; reviewerId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; status?: SQL<...> | ... 5 more ... | undefined; reviewedAt?: SQL<...> | ... 3 more ... | undefined; comments?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Type 'string' is not assignable to type 'SQL<unknown> | "pending" | "approved" | "rejected" | Placeholder<string, any> | null | undefined'.
  Overload 2 of 2, '(values: { questionId: string | SQL<unknown> | Placeholder<string, any>; reviewerId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; status?: SQL<...> | ... 5 more ... | undefined; reviewedAt?: SQL<...> | ... 3 more ... | undefined; comments?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'questionId' does not exist in type '{ questionId: string | SQL<unknown> | Placeholder<string, any>; reviewerId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; status?: SQL<...> | ... 5 more ... | undefined; reviewedAt?: SQL<...> | ... 3 more ... | undefined; comments?: string | ... 3 more ....'.
server/pg-storage.ts(1046,62): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; examId: string; toState: string; actorId: string; actorRole: string; comments?: string | null | undefined; fromState?: any; timestamp?: Date | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }'.
      Types of property 'toState' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "active" | "draft" | "locked" | "submitted" | "pending_hod" | "hod_approved" | "hod_rejected" | "pending_principal" | "principal_approved" | "principal_rejected" | "sent_to_committee" | "archived" | Placeholder<...>'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; examId: string; toState: string; actorId: string; actorRole: string; comments?: string | null | undefined; fromState?: any; timestamp?: Date | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }[]'.
      Type '{ tenantId: string; examId: string; toState: string; actorId: string; actorRole: string; comments?: string | null | undefined; fromState?: any; timestamp?: Date | undefined; }' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1142,76): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { message: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ message: string; type: string; tenantId: string; title: string; studentId: string; createdAt?: Date | null | undefined; testId?: string | null | undefined; attemptId?: string | null | undefined; isRead?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ message: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }'.
      Types of property 'type' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { message: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ message: string; type: string; tenantId: string; title: string; studentId: string; createdAt?: Date | null | undefined; testId?: string | null | undefined; attemptId?: string | null | undefined; isRead?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ message: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }[]'.
      Type '{ message: string; type: string; tenantId: string; title: string; studentId: string; createdAt?: Date | null | undefined; testId?: string | null | undefined; attemptId?: string | null | undefined; isRead?: boolean | ... 1 more ... | undefined; }' is missing the following properties from type '{ message: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1471,60): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<...> | Placeholder<...>; ... 4 more ...; displayName?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; grade: string; isActive?: boolean | null | undefined; createdAt?: Date | null | undefined; gradeGroup?: string | null | undefined; displayName?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; displayName?: string | ... 3 more ... | undefined; }'.
      Types of property 'gradeGroup' are incompatible.
        Type 'string | null | undefined' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
          Type 'string' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<...> | Placeholder<...>; ... 4 more ...; displayName?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; grade: string; isActive?: boolean | null | undefined; createdAt?: Date | null | undefined; gradeGroup?: string | null | undefined; displayName?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; displayName?: string | ... 3 more ... | undefined; }[]'.
      Type '{ tenantId: string; academicYearId: string; grade: string; isActive?: boolean | null | undefined; createdAt?: Date | null | undefined; gradeGroup?: string | null | undefined; displayName?: string | ... 1 more ... | undefined; }' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; displayName?: string | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1477,49): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<...> | Placeholder<...>; ... 4 more ...; displayName?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; grade: string; isActive?: boolean | null | undefined; createdAt?: Date | null | undefined; gradeGroup?: string | null | undefined; displayName?: string | ... 1 more ... | undefined; }[]' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; displayName?: string | ... 3 more ... | undefined; }'.
      Type '{ tenantId: string; academicYearId: string; grade: string; isActive?: boolean | null | undefined; createdAt?: Date | null | undefined; gradeGroup?: string | null | undefined; displayName?: string | ... 1 more ... | undefined; }[]' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; displayName?: string | ... 3 more ... | undefined; }': tenantId, academicYearId, grade
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<...> | Placeholder<...>; ... 4 more ...; displayName?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; grade: string; isActive?: boolean | null | undefined; createdAt?: Date | null | undefined; gradeGroup?: string | null | undefined; displayName?: string | ... 1 more ... | undefined; }[]' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; displayName?: string | ... 3 more ... | undefined; }[]'.
      Type '{ tenantId: string; academicYearId: string; grade: string; isActive?: boolean | null | undefined; createdAt?: Date | null | undefined; gradeGroup?: string | null | undefined; displayName?: string | ... 1 more ... | undefined; }' is not assignable to type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; displayName?: string | ... 3 more ... | undefined; }'.
        Types of property 'gradeGroup' are incompatible.
          Type 'string | null | undefined' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
            Type 'string' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
server/pg-storage.ts(1611,62): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; gradeGroup: string; examName: string; startDate?: Date | null | undefined; endDate?: Date | null | undefined; isActive?: boolean | null | undefined; ... 8 more ...; isVisible?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }'.
      Types of property 'gradeGroup' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; gradeGroup: string; examName: string; startDate?: Date | null | undefined; endDate?: Date | null | undefined; isActive?: boolean | null | undefined; ... 8 more ...; isVisible?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }[]'.
      Type '{ tenantId: string; academicYearId: string; gradeGroup: string; examName: string; startDate?: Date | null | undefined; endDate?: Date | null | undefined; isActive?: boolean | null | undefined; ... 8 more ...; isVisible?: boolean | ... 1 more ... | undefined; }' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1639,65): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; createdAt?: Date | null | undefined; isBlueprintMandatory?: boolean | null | undefined; blueprintMode?: string | null | undefined; allowEditAfterLock?: boolean | ... 1 more ... | undefined; updatedAt?: Date | ... 1 more ... | undefined; updatedBy?: string | ... 1 more ... ...' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }'.
      Types of property 'blueprintMode' are incompatible.
        Type 'string | null | undefined' is not assignable to type 'SQL<unknown> | "academic_year" | "exam_specific" | Placeholder<string, any> | null | undefined'.
          Type 'string' is not assignable to type 'SQL<unknown> | "academic_year" | "exam_specific" | Placeholder<string, any> | null | undefined'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; createdAt?: Date | null | undefined; isBlueprintMandatory?: boolean | null | undefined; blueprintMode?: string | null | undefined; allowEditAfterLock?: boolean | ... 1 more ... | undefined; updatedAt?: Date | ... 1 more ... | undefined; updatedBy?: string | ... 1 more ... ...' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }[]'.
      Type '{ tenantId: string; academicYearId: string; createdAt?: Date | null | undefined; isBlueprintMandatory?: boolean | null | undefined; blueprintMode?: string | null | undefined; allowEditAfterLock?: boolean | ... 1 more ... | undefined; updatedAt?: Date | ... 1 more ... | undefined; updatedBy?: string | ... 1 more ... ...' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1674,64): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; title: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; grade: string; title: string; subject: string; referenceType: string; fileUrl: string; isActive?: boolean | null | undefined; createdAt?: Date | null | undefined; ... 8 more ...; year?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; title: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }'.
      Types of property 'referenceType' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "question_paper" | "notes" | "model_answer" | "study_material" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; title: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; grade: string; title: string; subject: string; referenceType: string; fileUrl: string; isActive?: boolean | null | undefined; createdAt?: Date | null | undefined; ... 8 more ...; year?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; title: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }[]'.
      Type '{ tenantId: string; grade: string; title: string; subject: string; referenceType: string; fileUrl: string; isActive?: boolean | null | undefined; createdAt?: Date | null | undefined; ... 8 more ...; year?: string | ... 1 more ... | undefined; }' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; title: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1701,68): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<string, any>; userRole: SQL<unknown> | "super_admin" | ... 7 more ... | Placeholder<...>; ... 5 more ...; metadata?: SQL<...> | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; testId: string; userRole: string; action: string; setNumber: number; generatedBy: string; generatedAt?: Date | undefined; metadata?: { [x: string]: [any, ...any[]]; } | null | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<string, any>; userRole: SQL<unknown> | "super_admin" | ... 7 more ... | Placeholder<...>; ... 5 more ...; metadata?: SQL<...> | ... 3 more ... | undefined; }'.
      Types of property 'userRole' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<string, any>; userRole: SQL<unknown> | "super_admin" | ... 7 more ... | Placeholder<...>; ... 5 more ...; metadata?: SQL<...> | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; testId: string; userRole: string; action: string; setNumber: number; generatedBy: string; generatedAt?: Date | undefined; metadata?: { [x: string]: [any, ...any[]]; } | null | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<string, any>; userRole: SQL<unknown> | "super_admin" | ... 7 more ... | Placeholder<...>; ... 5 more ...; metadata?: SQL<...> | ... 3 more ... | undefined; }[]'.
      Type '{ tenantId: string; testId: string; userRole: string; action: string; setNumber: number; generatedBy: string; generatedAt?: Date | undefined; metadata?: { [x: string]: [any, ...any[]]; } | null | undefined; }' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<string, any>; userRole: SQL<unknown> | "super_admin" | ... 7 more ... | Placeholder<...>; ... 5 more ...; metadata?: SQL<...> | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1779,57): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; allowMockTest?: boolean | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ isActive: boolean; isDeleted: false; tenantId: string; academicYearId: string; examName: string; wing: string; createdAt?: Date | null | undefined; deletedAt?: Date | null | undefined; ... 9 more ...; allowMockTest?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; allowMockTest?: boolean | ... 3 more ... | undefined; }'.
      Types of property 'wing' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "secondary" | "senior_secondary" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; allowMockTest?: boolean | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'isActive' does not exist in type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; allowMockTest?: boolean | ... 3 more ... | undefined; }[]'.
server/pg-storage.ts(1838,15): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<string, any> | undefined; createdAt?: SQL<unknown> | Date | Placeholder<...> | null | undefined; ... 6 more ...; isConfigured?: boolean | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ [x: string]: any; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<string, any> | undefined; createdAt?: SQL<unknown> | Date | Placeholder<...> | null | undefined; ... 6 more ...; isConfigured?: boolean | ... 3 more ... | undefined; }'.
      Property 'tenantId' is missing in type '{ [x: string]: any; }' but required in type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<string, any> | undefined; createdAt?: SQL<unknown> | Date | Placeholder<...> | null | undefined; ... 6 more ...; isConfigured?: boolean | ... 3 more ... | undefined; }'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<string, any> | undefined; createdAt?: SQL<unknown> | Date | Placeholder<...> | null | undefined; ... 6 more ...; isConfigured?: boolean | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ [x: string]: any; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<string, any> | undefined; createdAt?: SQL<unknown> | Date | Placeholder<...> | null | undefined; ... 6 more ...; isConfigured?: boolean | ... 3 more ... | undefined; }[]'.
      Type '{ [x: string]: any; }' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<string, any> | undefined; createdAt?: SQL<unknown> | Date | Placeholder<...> | null | undefined; ... 6 more ...; isConfigured?: boolean | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1876,52): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { name: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ isActive: boolean; isDeleted: false; name: string; tenantId: string; displayName: string; createdAt?: Date | null | undefined; grades?: { [x: number]: string; length: number; toString: () => string; ... 38 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined; updatedAt?: Date | ... 1 more ... | ...' is not assignable to parameter of type '{ name: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }'.
      Types of property 'grades' are incompatible.
        Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'string | undefined'.
  Overload 2 of 2, '(values: { name: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'isActive' does not exist in type '{ name: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }[]'.
server/pg-storage.ts(1935,52): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; pageSize?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ isActive: boolean; isDeleted: false; tenantId: string; wingId: string; examName: string; academicYear: string; createdAt?: Date | null | undefined; subjects?: { [x: number]: string; length: number; ... 39 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined; ... 8 more ...; pageSize?: string | ....' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; pageSize?: string | ... 3 more ... | undefined; }'.
      Types of property 'subjects' are incompatible.
        Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'string | undefined'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; pageSize?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'isActive' does not exist in type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; pageSize?: string | ... 3 more ... | undefined; }[]'.
server/routes.ts(1089,36): error TS2339: Property 'getUpload' does not exist on type 'IStorage'.
server/routes.ts(2693,40): error TS2802: Type 'Map<string, { passage: any; questions: { id: string; options: string[] | null; type: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; status: string | null; ... 26 more ...; rejectionReason: string | null; }[]; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/routes.ts(2874,40): error TS2802: Type 'Map<string, { passage: any; questions: { id: string; options: string[] | null; type: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; status: string | null; ... 26 more ...; rejectionReason: string | null; }[]; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/routes.ts(3292,20): error TS2322: Type 'string' is not assignable to type '[any, ...any[]]'.
server/routes.ts(3323,20): error TS2322: Type 'string' is not assignable to type '[any, ...any[]]'.
server/routes.ts(3442,38): error TS2339: Property 'getSubmission' does not exist on type 'IStorage'.
server/routes.ts(3459,38): error TS2339: Property 'getSubmission' does not exist on type 'IStorage'.
server/routes.ts(3752,9): error TS2322: Type 'Date' is not assignable to type 'string'.
server/routes.ts(3753,9): error TS2322: Type 'Date' is not assignable to type 'string'.
server/routes.ts(3848,9): error TS2353: Object literal may only specify known properties, and 'id' does not exist in type '{ tenantId: string; academicYearId: string; grade: string; isActive?: boolean | null | undefined; createdAt?: Date | null | undefined; gradeGroup?: string | null | undefined; displayName?: string | ... 1 more ... | undefined; }'.
server/routes.ts(3987,37): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(3994,35): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(4019,35): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(4112,36): error TS2339: Property 'getUpload' does not exist on type 'IStorage'.
server/routes.ts(4427,35): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(4574,64): error TS2345: Argument of type 'string | null' is not assignable to parameter of type 'string'.
  Type 'null' is not assignable to type 'string'.
server/routes.ts(4585,54): error TS2345: Argument of type 'string | null' is not assignable to parameter of type 'string'.
  Type 'null' is not assignable to type 'string'.
server/routes.ts(4658,46): error TS2339: Property 'isDeleted' does not exist on type '{ id: string; name: string; code: string; logo: string | null; active: boolean | null; principalName: string | null; address: string | null; city: string | null; state: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(4665,27): error TS2339: Property 'principalEmail' does not exist on type '{ id: string; name: string; code: string; logo: string | null; active: boolean | null; principalName: string | null; address: string | null; city: string | null; state: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(4666,27): error TS2551: Property 'principalPhone' does not exist on type '{ id: string; name: string; code: string; logo: string | null; active: boolean | null; principalName: string | null; address: string | null; city: string | null; state: string | null; ... 9 more ...; userCodeCounter: number | null; }'. Did you mean 'principalName'?
server/routes.ts(4668,22): error TS2339: Property 'createdAt' does not exist on type '{ id: string; name: string; code: string; logo: string | null; active: boolean | null; principalName: string | null; address: string | null; city: string | null; state: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(4693,9): error TS2353: Object literal may only specify known properties, and 'principalEmail' does not exist in type '{ name: string; code: string; logo?: string | null | undefined; active?: boolean | null | undefined; principalName?: string | null | undefined; address?: string | null | undefined; city?: string | ... 1 more ... | undefined; ... 10 more ...; userCodeCounter?: number | ... 1 more ... | undefined; }'.
server/routes.ts(4896,32): error TS2339: Property 'isDeleted' does not exist on type '{ id: string; name: string; code: string; logo: string | null; active: boolean | null; principalName: string | null; address: string | null; city: string | null; state: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(4939,50): error TS2345: Argument of type 'string | null' is not assignable to parameter of type 'string'.
  Type 'null' is not assignable to type 'string'.
server/routes.ts(5289,37): error TS2551: Property 'getTenants' does not exist on type 'IStorage'. Did you mean 'getTenant'?
server/routes.ts(5290,44): error TS7006: Parameter 's' implicitly has an 'any' type.
server/storage.ts(336,69): error TS2304: Cannot find name 'ReferenceMaterial'.
server/storage.ts(337,45): error TS2304: Cannot find name 'ReferenceMaterial'.
server/storage.ts(338,37): error TS2304: Cannot find name 'InsertReferenceMaterial'.
server/storage.ts(338,71): error TS2304: Cannot find name 'ReferenceMaterial'.
server/storage.ts(339,53): error TS2304: Cannot find name 'ReferenceMaterial'.
server/storage.ts(339,82): error TS2304: Cannot find name 'ReferenceMaterial'.
server/storage.ts(405,14): error TS2420: Class 'MemStorage' incorrectly implements interface 'IStorage'.
  Type 'MemStorage' is missing the following properties from type 'IStorage': getReferenceMaterials, getReferenceMaterial, createReferenceMaterial, updateReferenceMaterial, softDeleteReferenceMaterial
server/storage.ts(454,11): error TS2740: Type '{ id: string; tenantId: null; email: string; password: string; name: string; role: "super_admin"; grade: null; avatar: null; parentOf: null; active: true; assignedQuestions: {}; sessionToken: null; }' is missing the following properties from type '{ id: string; name: string; active: boolean | null; email: string; tenantId: string | null; grade: string | null; userCode: string | null; password: string; role: "super_admin" | "admin" | ... 5 more ... | "parent"; ... 10 more ...; deletedBy: string | null; }': userCode, section, wingId, subjects, and 4 more.
server/storage.ts(556,7): error TS2322: Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
  The types returned by 'pop()' are incompatible between these types.
    Type 'unknown' is not assignable to type 'string | undefined'.
server/storage.ts(597,11): error TS2740: Type '{ id: `${string}-${string}-${string}-${string}-${string}`; name: string; code: string; logo: string | null; active: boolean; }' is missing the following properties from type '{ id: string; name: string; code: string; logo: string | null; active: boolean | null; principalName: string | null; address: string | null; city: string | null; state: string | null; ... 9 more ...; userCodeCounter: number | null; }': principalName, address, city, state, and 10 more.
server/storage.ts(701,49): error TS2802: Type 'Map<string, { id: string; options: string[] | null; type: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; status: string | null; tenantId: string; ... 25 more ...; rejectionReason: string | null; }[]>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/storage.ts(759,11): error TS2740: Type '{ id: `${string}-${string}-${string}-${string}-${string}`; tenantId: string; content: string; type: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; options: string[] | null; ... 19 more ...; status: string; }' is missing the following properties from type '{ id: string; options: string[] | null; type: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; status: string | null; tenantId: string; ... 25 more ...; rejectionReason: string | null; }': isDeleted, deletedAt, deletedBy, reviewedBy, and 2 more.
server/storage.ts(1034,11): error TS2739: Type '{ id: `${string}-${string}-${string}-${string}-${string}`; tenantId: string; filename: string; source: string; subject: string | null; grade: string | null; questionCount: number; uploadedBy: string | null; uploadedAt: Date; }' is missing the following properties from type '{ id: string; tenantId: string; grade: string | null; isDeleted: boolean | null; deletedAt: Date | null; deletedBy: string | null; subject: string | null; questionCount: number | null; filename: string; source: string; uploadedBy: string | null; uploadedAt: Date | null; }': isDeleted, deletedAt, deletedBy
server/storage.ts(1445,11): error TS2740: Type '{ id: `${string}-${string}-${string}-${string}-${string}`; tenantId: string; name: string; subject: string; grade: string; totalMarks: number; sections: any; createdBy: string | null; approvedBy: string | null; isApproved: boolean; createdAt: Date; }' is missing the following properties from type '{ id: string; name: string; tenantId: string; isLocked: boolean | null; lockedAt: Date | null; lockedBy: string | null; createdAt: Date | null; academicYearId: string | null; ... 11 more ...; isApproved: boolean | null; }': isLocked, lockedAt, lockedBy, academicYearId, and 5 more.
server/storage.ts(1895,7): error TS2322: Type 'string' is not assignable to type '"active" | "draft" | "locked" | "submitted" | "pending_hod" | "hod_approved" | "hod_rejected" | "pending_principal" | "principal_approved" | "principal_rejected" | "sent_to_committee" | "archived"'.
server/storage.ts(1897,7): error TS2322: Type 'string' is not assignable to type '"super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent"'.
server/storage.ts(1988,7): error TS2322: Type 'string' is not assignable to type '"test_unlocked" | "exam_submitted" | "result_published"'.
server/storage.ts(2373,24): error TS2802: Type 'MapIterator<{ id: string; type: "unit_test" | "review_test" | "quarterly" | "half_yearly" | "revision" | "preparatory" | "annual" | "mock"; tenantId: string; isActive: boolean | null; grade: string; ... 24 more ...; answerKeyUrl: string | null; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/storage.ts(2380,24): error TS2802: Type 'MapIterator<{ id: string; type: "unit_test" | "review_test" | "quarterly" | "half_yearly" | "revision" | "preparatory" | "annual" | "mock"; tenantId: string; isActive: boolean | null; grade: string; ... 24 more ...; answerKeyUrl: string | null; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/storage.ts(2387,21): error TS2802: Type 'MapIterator<{ id: string; options: string[] | null; type: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; status: string | null; tenantId: string; ... 25 more ...; rejectionReason: string | null; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/storage.ts(2390,21): error TS2802: Type 'MapIterator<{ id: string; status: "submitted" | "in_progress" | "absent" | "marked" | null; tenantId: string; totalMarks: number | null; testId: string; studentId: string; assignedQuestionIds: string[] | null; ... 9 more ...; manualScores: Record<...> | null; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/storage.ts(2397,21): error TS2802: Type 'MapIterator<{ id: string; options: string[] | null; type: "mcq" | "true_false" | "fill_blank" | "matching" | "numerical" | "short_answer" | "long_answer"; status: string | null; tenantId: string; ... 25 more ...; rejectionReason: string | null; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/storage.ts(2561,7): error TS2322: Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
  The types returned by 'pop()' are incompatible between these types.
    Type 'unknown' is not assignable to type 'string | undefined'.
server/storage.ts(2585,34): error TS2802: Type 'MapIterator<[string, { id: string; tenantId: string; isActive: boolean | null; createdAt: Date | null; wingId: string; subjects: string[] | null; isDeleted: boolean | null; createdBy: string | null; ... 9 more ...; pageSize: string | null; }]>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/storage.ts(2618,7): error TS2322: Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
  The types returned by 'pop()' are incompatible between these types.
    Type 'unknown' is not assignable to type 'string | undefined'.
server/storage.ts(2675,7): error TS2322: Type 'string' is not assignable to type '"primary" | "middle" | "secondary" | "senior_secondary"'.
server/storage.ts(2680,7): error TS2322: Type 'string' is not assignable to type '"annual" | "unit" | "term" | "practice"'.
server/storage.ts(2713,22): error TS2802: Type 'MapIterator<{ id: string; name: string; tenantId: string; isLocked: boolean | null; lockedAt: Date | null; lockedBy: string | null; createdAt: Date | null; academicYearId: string | null; ... 11 more ...; isApproved: boolean | null; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/storage.ts(2716,24): error TS2802: Type 'MapIterator<{ id: string; type: "unit_test" | "review_test" | "quarterly" | "half_yearly" | "revision" | "preparatory" | "annual" | "mock"; tenantId: string; isActive: boolean | null; grade: string; ... 24 more ...; answerKeyUrl: string | null; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/storage.ts(2733,11): error TS2741: Property 'usedStorageBytes' is missing in type '{ id: `${string}-${string}-${string}-${string}-${string}`; tenantId: string; s3BucketName: string | null; s3FolderPath: string | null; maxStorageBytes: any; isConfigured: boolean; createdAt: Date; updatedAt: Date; updatedBy: string | null; }' but required in type '{ id: string; tenantId: string; createdAt: Date | null; updatedAt: Date | null; updatedBy: string | null; s3BucketName: string | null; s3FolderPath: string | null; maxStorageBytes: any; usedStorageBytes: any; isConfigured: boolean | null; }'.
server/storage.ts(2755,5): error TS2739: Type 'MemStorage' is missing the following properties from type 'IStorage': getReferenceMaterials, getReferenceMaterial, createReferenceMaterial, updateReferenceMaterial, softDeleteReferenceMaterial
server/storage.ts(2759,5): error TS2322: Type 'typeof import("/app/server/pg-storage")' is not assignable to type '{ pgStorage: IStorage; }'.
  Types of property 'pgStorage' are incompatible.
    Type 'PgStorage' is missing the following properties from type 'IStorage': getReferenceMaterials, getReferenceMaterial, createReferenceMaterial, updateReferenceMaterial, softDeleteReferenceMaterial
server/storage.ts(2761,10): error TS18047: 'pgStorageModule' is possibly 'null'.
server/storage.ts(2768,5): error TS2739: Type 'MemStorage' is missing the following properties from type 'IStorage': getReferenceMaterials, getReferenceMaterial, createReferenceMaterial, updateReferenceMaterial, softDeleteReferenceMaterial
server/storage.ts(2773,3): error TS2739: Type 'MemStorage' is missing the following properties from type 'IStorage': getReferenceMaterials, getReferenceMaterial, createReferenceMaterial, updateReferenceMaterial, softDeleteReferenceMaterial
server/storage.ts(2787,7): error TS2739: Type 'MemStorage' is missing the following properties from type 'IStorage': getReferenceMaterials, getReferenceMaterial, createReferenceMaterial, updateReferenceMaterial, softDeleteReferenceMaterial
shared/schema.ts(782,20): error TS2552: Cannot find name 'bigint'. Did you mean 'BigInt'?
shared/schema.ts(783,21): error TS2552: Cannot find name 'bigint'. Did you mean 'BigInt'?
shared/schema.ts(790,94): error TS2345: Argument of type '{ id: true; }' is not assignable to parameter of type 'Exactly<{ [x: string]: true | undefined; id?: true | undefined; tenantId?: true | undefined; s3BucketName?: true | undefined; s3FolderPath?: true | undefined; isConfigured?: true | undefined; createdAt?: true | undefined; updatedAt?: true | undefined; updatedBy?: true | undefined; }, { ...; }>'.
  Type '{ id: true; }' is not assignable to type 'Record<any, never>'.
    Property 'id' is incompatible with index signature.
      Type 'boolean' is not assignable to type 'never'.
shared/schema.ts(805,13): error TS2552: Cannot find name 'bigint'. Did you mean 'BigInt'?
shared/schema.ts(815,90): error TS2345: Argument of type '{ id: true; }' is not assignable to parameter of type 'Exactly<{ [x: string]: true | undefined; id?: true | undefined; title?: true | undefined; description?: true | undefined; grade?: true | undefined; subject?: true | undefined; category?: true | undefined; ... 9 more ...; updatedAt?: true | undefined; }, { ...; }>'.
  Type '{ id: true; }' is not assignable to type 'Record<any, never>'.
    Property 'id' is incompatible with index signature.
      Type 'boolean' is not assignable to type 'never'.
shared/schema.ts(826,13): error TS2552: Cannot find name 'bigint'. Did you mean 'BigInt'?
shared/schema.ts(841,79): error TS2345: Argument of type '{ id: true; }' is not assignable to parameter of type 'Exactly<{ [x: string]: true | undefined; id?: true | undefined; tenantId?: true | undefined; fileType?: true | undefined; fileName?: true | undefined; originalName?: true | undefined; mimeType?: true | undefined; ... 10 more ...; updatedAt?: true | undefined; }, { ...; }>'.
  Type '{ id: true; }' is not assignable to type 'Record<any, never>'.
    Property 'id' is incompatible with index signature.
      Type 'boolean' is not assignable to type 'never'. to list all errors. Many are in the original codebase (e.g., ).
    *   **Why to solve this issue and what will be achieved with this?** Ensures a stable build and improves long-term maintainability.
    *   **Should Test frontend/backend/both after fix:** Both (regression).
    *   **Is recurring issue?** Y

**Known issue recurrence from previous fork**
- The need to implement new methods in **both**  and  has been a recurring oversight, causing deployed versions to fail.
- The failure to run database migrations (
> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/app/drizzle.config.ts') is a recurring deployment blocker.
- The user's complaint about mock/demo data is now a recurring issue.

**Code Architecture**


**Key Technical Concepts**
*   **Frontend:** React, TypeScript, Vite, Tailwind CSS, Shadcn UI, TanStack Query,  for routing
*   **Backend:** Node.js, Express.js
*   **Database:** PostgreSQL, Drizzle ORM
*   **Authentication:** JWT

**key DB schema**
*   :  (new fields added)
*   : (Schools) 
*   : 
*   : 
*   :  (logic for 100GB default)
*   :  (**New**)
*   :  (**New**)

**changes in tech stack**
- None.

**All files of reference**
*   **/app/shared/schema.ts**: The source of truth for the database schema. Recently updated with  and  tables.
*   **/app/server/storage.ts**: The  interface and  implementation.
*   **/app/server/pg-storage.ts**: The PostgreSQL implementation that is used in production.
*   **/app/server/routes.ts**: Contains all API endpoint definitions, including the new ones for users and reference materials.
*   **/app/client/src/pages/superadmin/**: Directory containing all the new, from-scratch dashboard pages.
*   **/app/client/src/pages/dashboard.tsx**: The Principal dashboard file that needs to be fixed to remove mock data.
*   **/app/client/src/App.tsx**: The main frontend router, updated with new routes and the theme provider.
*   **/etc/supervisor/conf.d/backend.conf & frontend.conf**: Supervisor configs that were fixed to run the correct Node.js/Vite stack.

**Areas that need refactoring**:
- The entire  class in  should be phased out in favor of a PostgreSQL-first development approach to prevent discrepancies between local and production environments.
- The old admin pages at  are obsolete and should be removed.

**key api endpoints**
*    (CRUD)
*    (CRUD)
*    (CRUD)
*    (CRUD)
*    (POST for CSV upload)
*    (CRUD) (**New**)
*   The endpoint providing data for the Principal Analytics dashboard needs to be identified and fixed.

**Critical Info for New Agent**
*   **TOP PRIORITY:** The user is adamant about removing all demo/mock data. Your first task must be to fix the **Principal Analytics Dashboard** to use real data from the database. Do not proceed with new features until this is resolved.
*   **DATABASE MIGRATION:** The production database is out of sync. After any schema changes, you must remind the user to run 
> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/app/drizzle.config.ts' in their Render shell. This is a recurring deployment blocker.
*   **DATABASE IS THE TRUTH:** Adhere strictly to the database-first rule. All new logic must be written for PostgreSQL (). Avoid adding logic that only works in .
*   **APPROVED PLAN:** The user has approved a specific order of operations:
    1.  Fix the Principal Dashboard demo data issue.
    2.  Complete **Phase A** (Reference Materials UI).
    3.  Build the **P1** Principal Analytics dashboard.

**documents and test reports created in this job**
*   
*   

**Last 10 User Messages and any pending HUMAN messages**
1.  **User:** Confirms plan for onboarding fixes, design, analytics, and sets priority order. **Status: In Progress**.
2.  **User:** Requests logo on all dashboards, a specific footer, and removal of all demo data. **Status: In Progress**.
3.  **User:** Provides the round Prashnakosh logo and clarifies footer text. **Status: In Progress**.
4.  **User:** Provides extremely detailed requirements for storage policy, a global reference library, and future-proofing, emphasizing a database-first and no data loss policy. **Status: In Progress**.
5.  **User:** Confirms use of PostgreSQL, clarifies S3 is not yet configured, and approves a phased plan (Phase A, B, C). **Status: In Progress**.
6.  **User:** **CRITICAL CORRECTION:** Points out that the Principal dashboard is still showing demo/mock data and demands it be fixed immediately, wiring all dashboards to real API data. **Status: Pending**.
7.  **User:** Says Logout or signoit is not working. **Status: Resolved**.
8.  **User:** Reports Add user leads to plain paper and bulk upload is missing with template. **Status: Resolved**.
9.  **User:** Reports error about being unable to create wings on the deployed site. **Status: Resolved** (by adding methods to ).
10. **User:** Asks Where will I add the Users???, pointing out the missing User Management module. **Status: Resolved**.

**Project Health Check:**
*   **Broken:**
    *   **Principal Analytics Dashboard:** Functionally broken as it displays incorrect (mock) data.
    *   **Production Environment:** The database schema is not migrated, causing new features (wings, exams) to fail on deployment.
*   **Mocked:**
    *   Local development still relies on , which has repeatedly caused logic to be missed in the  production equivalent.

**3rd Party Integrations**
*   **AWS S3:** Planned for all file storage. The schema and UI stubs are being built, but credentials are not yet integrated.

**Testing status**
*   **Testing agent used after significant changes:** YES (once, to find missing storage methods)
*   **Troubleshoot agent used after agent stuck in loop:** NO
*   **Test files created:** None
*   **Known regressions:** The login page styling was broken and fixed. The core regression is that new features work locally with  but fail on deployment due to missing  logic and un-migrated DB schema.

**Credentials to test flow:**
*   **Role:** Super Admin
*   **Email:** 
*   **Password:** 

**What agent forgot to execute**
*   The agent consistently forgot to implement new storage methods in  after adding them to , causing deployment failures.
*   The agent has not ensured the database migration command (
> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/app/drizzle.config.ts') is run on the production environment, leading to persistent  errors.
*   The agent has failed to address the user's repeated and critical feedback about the Principal Analytics dashboard showing mock data.</analysis>
