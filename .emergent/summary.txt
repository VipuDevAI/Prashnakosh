<analysis>**original_problem_statement:**
The user initially provided an existing education governance application, Prashnakosh, and requested the creation of a new Super Admin dashboard to manage schools, users, and settings with a premium UI and a strict PostgreSQL-only database policy.

The scope evolved to include a major feature: an AI-powered question paper parser. Initially, this was built to use OpenAI GPT-4 Vision to parse PDF/image files. However, due to the slowness and cost of this method, the user provided question banks in  (Word) format. The task then shifted to building a fast, efficient parser for these Word documents and bulk-uploading over a thousand questions into the system's question bank.

The user also requested the setup of a specific school (Maharishi Vidya Mandir) with Principal, HOD, and Teacher accounts, and plans to upload a list of 300 students for whom accounts need to be created.

**PRODUCT REQUIREMENTS:**
1.  **Bulk Question Upload from Word Documents:**
    *   Parse  files containing question banks for various chapters and subjects.
    *   Extract question text, type (MCQ, Short Answer, True/False, Assertion-Reasoning), marks, options, and correct answers.
    *   Handle complex, table-based layouts within the Word documents.
    *   Upload the extracted questions into the PostgreSQL database in large batches, linking them to the correct school, class, and subject.
2.  **User & School Management:**
    *   Create and manage schools, departments (wings), and user accounts (Principal, HOD, Teacher, Student).
    *   Provide login credentials for the created accounts.
3.  **Exam & Question Bank Workflow:**
    *   Uploaded questions must be available for HODs to review and approve.
    *   Approved questions should be usable for creating exams (mock tests, chapter tests).
    *   The user needs clarification on whether only objective questions are allowed in certain test types.
4.  **AI PDF/Image Parser (Superseded but functional):**
    *   A UI in the Super Admin dashboard for uploading PDF/Image files.
    *   A Python/FastAPI microservice using OpenAI GPT-4 Vision to extract questions.
5.  **Data & Storage Policy:**
    *   PostgreSQL is the single source of truth. All mock data has been removed.

**User's preferred language**: English

**what currently exists?**
The application features a complete Super Admin dashboard with a PostgreSQL backend. The previously built AI PDF parser is functional but has been superseded by a much faster, custom-built Python script that parses  files. The agent successfully used this new script to parse four large Word documents and **bulk-uploaded 1,002 questions** for Class 12 Computer Science into the database. A school, Maharishi Vidya Mandir, has been created along with accounts for the Principal, HOD, and a Teacher.

**Last working item**:
- **Last item agent was working:** The agent was clarifying a user question about whether only objective-type questions are allowed for mock tests and chapter/lesson tests, after successfully completing the bulk upload of 1,002 questions.
- **Status:** IN PROGRESS
- **Agent Testing Done:** N/A (Awaiting user clarification to proceed)
- **Which testing method agent to use?** N/A (This is a query, not a feature/bug)
- **User Testing Done:** N

**All Pending/In progress Issue list**:
- **Issue 1: Clarify Question Type Rules for Different Tests (P0)**
  - **Description:** The user asked if only objective questions are allowed in mock, chapter, and lesson tests. The system's current logic for this needs to be investigated and confirmed.
  - **Attempted fixes:** The agent was just about to investigate the codebase when the session ended.
  - **Next debug checklist:**
    1.  Examine the frontend components related to creating/taking tests (mock tests, chapter tests).
    2.  Check the backend API endpoints that serve questions for these tests (, etc.).
    3.  Analyze the database queries in  to see if they filter by .
  - **Why fix this issue and what will be achieved with the fix?** To ensure the application behaves as the user expects and to allow the HOD/teachers to create valid exams for students.
  - **Status:** NOT STARTED
  - **Should Test frontend/backend/both after fix?** Both.
  - **Blocked on other issue:** None.

**In progress Task List**:
None.

**Upcoming and Future Tasks**
*   **Upcoming Tasks:**
    *   **P0: Create accounts for 300 students:** The user has stated they will provide a list of students to be bulk-uploaded.
    *   **P1: Implement question type filtering for tests:** Based on the user's clarification, implement any necessary logic to restrict question types for different exams.
*   **Future Tasks:**
    *   **P1: Integrate AWS S3 (Phase C):** Connect the application to a real AWS S3 bucket for persistent file storage for Reference Materials and question paper attachments.
    *   **P2: Build PowerBI-level Principal Analytics:** Enhance the Principal Analytics dashboard with more interactive charts, trends, and deep-dive metrics.
    *   **P2: Clean up obsolete legacy admin pages:** Remove files under .
    *   **P2: Address pre-existing TypeScript errors:** Run client/src/pages/admin/blueprint-policies.tsx(113,9): error TS2322: Type '{ title: string; subtitle: string; actions: Element; }' is not assignable to type 'IntrinsicAttributes & PageHeaderProps'.
  Property 'title' does not exist on type 'IntrinsicAttributes & PageHeaderProps'.
client/src/pages/admin/reference-library.tsx(182,9): error TS2322: Type '{ title: string; subtitle: string; actions: Element; }' is not assignable to type 'IntrinsicAttributes & PageHeaderProps'.
  Property 'title' does not exist on type 'IntrinsicAttributes & PageHeaderProps'.
client/src/pages/admin/user-bulk-upload.tsx(113,9): error TS2322: Type '{ title: string; subtitle: string; actions: Element; }' is not assignable to type 'IntrinsicAttributes & PageHeaderProps'.
  Property 'title' does not exist on type 'IntrinsicAttributes & PageHeaderProps'.
client/src/pages/chapters.tsx(50,24): error TS2802: Type 'Set<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
client/src/pages/practice.tsx(46,24): error TS2802: Type 'Set<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
client/src/pages/practice.tsx(48,11): error TS2802: Type 'Set<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/pg-storage.ts(166,43): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { role: "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent" | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 17 more ...; deletedBy?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ active: boolean; role: "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent"; name: string; email: string; password: string; section?: string | null | undefined; ... 12 more ...; deletedBy?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ role: "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent" | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 17 more ...; deletedBy?: string | ... 3 more ... | undefined; }'.
      Types of property 'subjects' are incompatible.
        Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'string | undefined'.
  Overload 2 of 2, '(values: { role: "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent" | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 17 more ...; deletedBy?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'active' does not exist in type '{ role: "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent" | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 17 more ...; deletedBy?: string | ... 3 more ... | undefined; }[]'.
server/pg-storage.ts(270,47): error TS2769: No overload matches this call.
  Overload 1 of 3, '(left: PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; ... 9 more ...; generated: undefined; }, {}, { ...; }>, right: "mcq" | ... 6 more ... | "matching"): SQL<...>', gave the following error.
    Argument of type 'string' is not assignable to parameter of type '"mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | SQLWrapper | "matching"'.
  Overload 2 of 3, '(left: Aliased<string>, right: string | SQLWrapper): SQL<unknown>', gave the following error.
    Argument of type 'PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; ... 9 more ...; generated: undefined; }, {}, { ...; }>' is not assignable to parameter of type 'Aliased<string>'.
      Type 'PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; ... 9 more ...; generated: undefined; }, {}, { ...; }>' is missing the following properties from type 'Aliased<string>': sql, fieldAlias
  Overload 3 of 3, '(left: never, right: unknown): SQL<unknown>', gave the following error.
    Argument of type 'PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; ... 9 more ...; generated: undefined; }, {}, { ...; }>' is not assignable to parameter of type 'never'.
server/pg-storage.ts(304,49): error TS2802: Type 'Map<string, { id: string; content: string; type: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; subject: string; chapter: string; marks: number | null; ... 24 more ...; rejectionReason: string | null; }[]>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/pg-storage.ts(833,60): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { name: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 16 more ...; lockedBy?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ name: string; subject: string; grade: string; tenantId: string; totalMarks: number; isDeleted?: boolean | null | undefined; deletedAt?: Date | null | undefined; deletedBy?: string | null | undefined; ... 10 more ...; lockedBy?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ name: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 16 more ...; lockedBy?: string | ... 3 more ... | undefined; }'.
      Types of property 'sections' are incompatible.
        Type '{ [x: number]: { name: string; marks: number; questionCount: number; questionType: string; difficulty?: unknown; chapters?: unknown; instructions?: unknown; }; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | ...' is not assignable to type 'SQL<unknown> | BlueprintSection[] | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: { name: string; marks: number; questionCount: number; questionType: string; difficulty?: unknown; chapters?: unknown; instructions?: unknown; }; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | ...' is not assignable to type 'SQL<unknown> | BlueprintSection[] | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: { name: string; marks: number; questionCount: number; questionType: string; difficulty?: unknown; chapters?: unknown; instructions?: unknown; }; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | ...' is not assignable to type 'BlueprintSection[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'BlueprintSection | undefined'.
  Overload 2 of 2, '(values: { name: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 16 more ...; lockedBy?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ name: string; subject: string; grade: string; tenantId: string; totalMarks: number; isDeleted?: boolean | null | undefined; deletedAt?: Date | null | undefined; deletedBy?: string | null | undefined; ... 10 more ...; lockedBy?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ name: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 16 more ...; lockedBy?: string | ... 3 more ... | undefined; }[]'.
      Type '{ name: string; subject: string; grade: string; tenantId: string; totalMarks: number; isDeleted?: boolean | null | undefined; deletedAt?: Date | null | undefined; deletedBy?: string | null | undefined; ... 10 more ...; lockedBy?: string | ... 1 more ... | undefined; }' is missing the following properties from type '{ name: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 16 more ...; lockedBy?: string | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(859,63): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { questionId: string | SQL<unknown> | Placeholder<string, any>; reviewerId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; status?: "pending" | ... 5 more ... | undefined; reviewedAt?: SQL<...> | ... 3 more ... | undefined; comments?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Type 'string' is not assignable to type '"pending" | SQL<unknown> | "rejected" | "approved" | Placeholder<string, any> | null | undefined'.
  Overload 2 of 2, '(values: { questionId: string | SQL<unknown> | Placeholder<string, any>; reviewerId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; status?: "pending" | ... 5 more ... | undefined; reviewedAt?: SQL<...> | ... 3 more ... | undefined; comments?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'questionId' does not exist in type '{ questionId: string | SQL<unknown> | Placeholder<string, any>; reviewerId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; status?: "pending" | ... 5 more ... | undefined; reviewedAt?: SQL<...> | ... 3 more ... | undefined; comments?: string | ... 3 more ...'.
server/pg-storage.ts(1048,62): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; examId: string; toState: string; actorId: string; actorRole: string; comments?: string | null | undefined; fromState?: any; timestamp?: Date | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }'.
      Types of property 'toState' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "active" | "draft" | "locked" | "submitted" | "pending_hod" | "hod_approved" | "hod_rejected" | "pending_principal" | "principal_approved" | "principal_rejected" | "sent_to_committee" | "archived" | Placeholder<...>'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; examId: string; toState: string; actorId: string; actorRole: string; comments?: string | null | undefined; fromState?: any; timestamp?: Date | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }[]'.
      Type '{ tenantId: string; examId: string; toState: string; actorId: string; actorRole: string; comments?: string | null | undefined; fromState?: any; timestamp?: Date | undefined; }' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1144,76): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { title: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ title: string; type: string; tenantId: string; message: string; studentId: string; createdAt?: Date | null | undefined; testId?: string | null | undefined; attemptId?: string | null | undefined; isRead?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ title: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }'.
      Types of property 'type' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { title: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ title: string; type: string; tenantId: string; message: string; studentId: string; createdAt?: Date | null | undefined; testId?: string | null | undefined; attemptId?: string | null | undefined; isRead?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ title: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }[]'.
      Type '{ title: string; type: string; tenantId: string; message: string; studentId: string; createdAt?: Date | null | undefined; testId?: string | null | undefined; attemptId?: string | null | undefined; isRead?: boolean | ... 1 more ... | undefined; }' is missing the following properties from type '{ title: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1473,60): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<...> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }'.
      Types of property 'gradeGroup' are incompatible.
        Type 'string | null | undefined' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
          Type 'string' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
  Overload 2 of 2, '(values: { grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<...> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }[]'.
      Type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }' is missing the following properties from type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1479,49): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<...> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }[]' is not assignable to parameter of type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }'.
      Type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }[]' is missing the following properties from type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }': grade, tenantId, academicYearId
  Overload 2 of 2, '(values: { grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<...> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }[]' is not assignable to parameter of type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }[]'.
      Type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }' is not assignable to type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }'.
        Types of property 'gradeGroup' are incompatible.
          Type 'string | null | undefined' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
            Type 'string' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
server/pg-storage.ts(1613,62): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; gradeGroup: string; examName: string; createdAt?: Date | null | undefined; createdBy?: string | null | undefined; isActive?: boolean | null | undefined; ... 8 more ...; isVisible?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }'.
      Types of property 'gradeGroup' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; gradeGroup: string; examName: string; createdAt?: Date | null | undefined; createdBy?: string | null | undefined; isActive?: boolean | null | undefined; ... 8 more ...; isVisible?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }[]'.
      Type '{ tenantId: string; academicYearId: string; gradeGroup: string; examName: string; createdAt?: Date | null | undefined; createdBy?: string | null | undefined; isActive?: boolean | null | undefined; ... 8 more ...; isVisible?: boolean | ... 1 more ... | undefined; }' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1641,65): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; isBlueprintMandatory?: boolean | null | undefined; blueprintMode?: string | null | undefined; allowEditAfterLock?: boolean | null | undefined; createdAt?: Date | ... 1 more ... | undefined; updatedAt?: Date | ... 1 more ... | undefined; updatedBy?: string | ... 1 more ... ...' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }'.
      Types of property 'blueprintMode' are incompatible.
        Type 'string | null | undefined' is not assignable to type 'SQL<unknown> | "academic_year" | "exam_specific" | Placeholder<string, any> | null | undefined'.
          Type 'string' is not assignable to type 'SQL<unknown> | "academic_year" | "exam_specific" | Placeholder<string, any> | null | undefined'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; isBlueprintMandatory?: boolean | null | undefined; blueprintMode?: string | null | undefined; allowEditAfterLock?: boolean | null | undefined; createdAt?: Date | ... 1 more ... | undefined; updatedAt?: Date | ... 1 more ... | undefined; updatedBy?: string | ... 1 more ... ...' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }[]'.
      Type '{ tenantId: string; academicYearId: string; isBlueprintMandatory?: boolean | null | undefined; blueprintMode?: string | null | undefined; allowEditAfterLock?: boolean | null | undefined; createdAt?: Date | ... 1 more ... | undefined; updatedAt?: Date | ... 1 more ... | undefined; updatedBy?: string | ... 1 more ... ...' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1676,64): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { title: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ title: string; subject: string; grade: string; tenantId: string; referenceType: string; fileUrl: string; description?: string | null | undefined; isDeleted?: boolean | null | undefined; deletedAt?: Date | ... 1 more ... | undefined; ... 7 more ...; year?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ title: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }'.
      Types of property 'referenceType' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "question_paper" | "notes" | "model_answer" | "study_material" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { title: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ title: string; subject: string; grade: string; tenantId: string; referenceType: string; fileUrl: string; description?: string | null | undefined; isDeleted?: boolean | null | undefined; deletedAt?: Date | ... 1 more ... | undefined; ... 7 more ...; year?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ title: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }[]'.
      Type '{ title: string; subject: string; grade: string; tenantId: string; referenceType: string; fileUrl: string; description?: string | null | undefined; isDeleted?: boolean | null | undefined; deletedAt?: Date | ... 1 more ... | undefined; ... 7 more ...; year?: string | ... 1 more ... | undefined; }' is missing the following properties from type '{ title: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1703,68): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { action: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<...>; ... 5 more ...; generatedAt?: SQL<...> | ... 2 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ action: string; tenantId: string; testId: string; userRole: string; setNumber: number; generatedBy: string; metadata?: { [x: string]: [any, ...any[]]; } | null | undefined; generatedAt?: Date | undefined; }' is not assignable to parameter of type '{ action: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<...>; ... 5 more ...; generatedAt?: SQL<...> | ... 2 more ... | undefined; }'.
      Types of property 'userRole' are incompatible.
        Type 'string' is not assignable to type '"super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent" | SQL<unknown> | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { action: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<...>; ... 5 more ...; generatedAt?: SQL<...> | ... 2 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ action: string; tenantId: string; testId: string; userRole: string; setNumber: number; generatedBy: string; metadata?: { [x: string]: [any, ...any[]]; } | null | undefined; generatedAt?: Date | undefined; }' is not assignable to parameter of type '{ action: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<...>; ... 5 more ...; generatedAt?: SQL<...> | ... 2 more ... | undefined; }[]'.
      Type '{ action: string; tenantId: string; testId: string; userRole: string; setNumber: number; generatedBy: string; metadata?: { [x: string]: [any, ...any[]]; } | null | undefined; generatedAt?: Date | undefined; }' is missing the following properties from type '{ action: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<...>; ... 5 more ...; generatedAt?: SQL<...> | ... 2 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1785,57): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; logoUrl?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ isActive: boolean; isDeleted: false; tenantId: string; academicYearId: string; examName: string; wing: string; deletedAt?: Date | null | undefined; deletedBy?: string | null | undefined; ... 9 more ...; logoUrl?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; logoUrl?: string | ... 3 more ... | undefined; }'.
      Types of property 'wing' are incompatible.
        Type 'string' is not assignable to type '"secondary" | SQL<unknown> | "primary" | "middle" | "senior_secondary" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; logoUrl?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'isActive' does not exist in type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; logoUrl?: string | ... 3 more ... | undefined; }[]'.
server/pg-storage.ts(1882,52): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { name: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ isActive: boolean; isDeleted: false; name: string; displayName: string; tenantId: string; createdAt?: Date | null | undefined; updatedAt?: Date | null | undefined; grades?: { ...; } | null | undefined; sortOrder?: number | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ name: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }'.
      Types of property 'grades' are incompatible.
        Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'string | undefined'.
  Overload 2 of 2, '(values: { name: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'isActive' does not exist in type '{ name: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }[]'.
server/pg-storage.ts(1941,52): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 15 more ...; pageSize?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ isActive: boolean; isDeleted: false; tenantId: string; wingId: string; examName: string; academicYear: string; subjects?: { [x: number]: string; length: number; toString: () => string; toLocaleString: { ...; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined; ... 10 more ...; pageSiz...' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 15 more ...; pageSize?: string | ... 3 more ... | undefined; }'.
      Types of property 'subjects' are incompatible.
        Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'string | undefined'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 15 more ...; pageSize?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'isActive' does not exist in type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 15 more ...; pageSize?: string | ... 3 more ... | undefined; }[]'.
server/routes.ts(1089,36): error TS2339: Property 'getUpload' does not exist on type 'IStorage'.
server/routes.ts(1829,37): error TS7016: Could not find a declaration file for module 'node-fetch'. '/app/node_modules/node-fetch/lib/index.js' implicitly has an 'any' type.
  Try `npm i --save-dev @types/node-fetch` if it exists or add a new declaration (.d.ts) file containing `declare module 'node-fetch';`
server/routes.ts(1866,37): error TS7016: Could not find a declaration file for module 'node-fetch'. '/app/node_modules/node-fetch/lib/index.js' implicitly has an 'any' type.
  Try `npm i --save-dev @types/node-fetch` if it exists or add a new declaration (.d.ts) file containing `declare module 'node-fetch';`
server/routes.ts(2763,40): error TS2802: Type 'Map<string, { passage: any; questions: { id: string; content: string; type: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; subject: string; ... 26 more ...; rejectionReason: string | null; }[]; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/routes.ts(2944,40): error TS2802: Type 'Map<string, { passage: any; questions: { id: string; content: string; type: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; subject: string; ... 26 more ...; rejectionReason: string | null; }[]; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/routes.ts(3362,20): error TS2322: Type 'string' is not assignable to type '[any, ...any[]]'.
server/routes.ts(3393,20): error TS2322: Type 'string' is not assignable to type '[any, ...any[]]'.
server/routes.ts(3512,38): error TS2339: Property 'getSubmission' does not exist on type 'IStorage'.
server/routes.ts(3529,38): error TS2339: Property 'getSubmission' does not exist on type 'IStorage'.
server/routes.ts(3822,9): error TS2322: Type 'Date' is not assignable to type 'string'.
server/routes.ts(3823,9): error TS2322: Type 'Date' is not assignable to type 'string'.
server/routes.ts(3918,9): error TS2353: Object literal may only specify known properties, and 'id' does not exist in type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }'.
server/routes.ts(4057,37): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(4064,35): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(4089,35): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(4182,36): error TS2339: Property 'getUpload' does not exist on type 'IStorage'.
server/routes.ts(4497,35): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(4644,64): error TS2345: Argument of type 'string | null' is not assignable to parameter of type 'string'.
  Type 'null' is not assignable to type 'string'.
server/routes.ts(4655,54): error TS2345: Argument of type 'string | null' is not assignable to parameter of type 'string'.
  Type 'null' is not assignable to type 'string'.
server/routes.ts(4728,46): error TS2339: Property 'isDeleted' does not exist on type '{ address: string | null; code: string; id: string; name: string; email: string | null; active: boolean | null; logo: string | null; principalName: string | null; city: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(4735,27): error TS2339: Property 'principalEmail' does not exist on type '{ address: string | null; code: string; id: string; name: string; email: string | null; active: boolean | null; logo: string | null; principalName: string | null; city: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(4736,27): error TS2551: Property 'principalPhone' does not exist on type '{ address: string | null; code: string; id: string; name: string; email: string | null; active: boolean | null; logo: string | null; principalName: string | null; city: string | null; ... 9 more ...; userCodeCounter: number | null; }'. Did you mean 'principalName'?
server/routes.ts(4738,22): error TS2339: Property 'createdAt' does not exist on type '{ address: string | null; code: string; id: string; name: string; email: string | null; active: boolean | null; logo: string | null; principalName: string | null; city: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(4763,9): error TS2353: Object literal may only specify known properties, and 'principalEmail' does not exist in type '{ code: string; name: string; address?: string | null | undefined; email?: string | null | undefined; active?: boolean | null | undefined; logo?: string | null | undefined; principalName?: string | ... 1 more ... | undefined; ... 10 more ...; userCodeCounter?: number | ... 1 more ... | undefined; }'.
server/routes.ts(4967,32): error TS2339: Property 'isDeleted' does not exist on type '{ address: string | null; code: string; id: string; name: string; email: string | null; active: boolean | null; logo: string | null; principalName: string | null; city: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(5010,50): error TS2345: Argument of type 'string | null' is not assignable to parameter of type 'string'.
  Type 'null' is not assignable to type 'string'.
server/routes.ts(5360,37): error TS2551: Property 'getTenants' does not exist on type 'IStorage'. Did you mean 'getTenant'?
server/routes.ts(5361,44): error TS7006: Parameter 's' implicitly has an 'any' type. and fix the reported issues for long-term maintainability.

**Completed work in this session**
- **Word Document Parsing & Bulk Upload (DONE):**
  - Created a custom Python script () to parse table-based  files, superseding the slower PDF/AI method.
  - Extracted 1,162 questions from four Word documents in under a second.
  - Successfully **uploaded 1,002 questions** into the PostgreSQL database using a batched API approach to handle timeouts.
- **School & Staff Setup (DONE):**
  - Created the school Maharishi Vidya Mandir Senior Secondary School Chetpet Chennai-31.
  - Created and provided credentials for the Principal, HOD (CS), and Teacher (CS) roles with user-specified names.
- **AI Parser Routing Fix (DONE):**
  - Fixed the frontend  to call a backend proxy route instead of a hardcoded  URL.
  - Implemented an Express.js proxy in  to forward  requests to the Python parser service.
- **Environment Restoration (DONE, Recurring):**
  - Repeatedly re-installed and re-configured the PostgreSQL database service after it was lost due to container resets.
  - Re-seeded the Super Admin user and re-created school/staff accounts as needed after database resets.

**Earlier issues found/mentioned but not fixed**
- **Issue 1: Pre-existing TypeScript Errors**
  - **Debug checklist:** Run client/src/pages/admin/blueprint-policies.tsx(113,9): error TS2322: Type '{ title: string; subtitle: string; actions: Element; }' is not assignable to type 'IntrinsicAttributes & PageHeaderProps'.
  Property 'title' does not exist on type 'IntrinsicAttributes & PageHeaderProps'.
client/src/pages/admin/reference-library.tsx(182,9): error TS2322: Type '{ title: string; subtitle: string; actions: Element; }' is not assignable to type 'IntrinsicAttributes & PageHeaderProps'.
  Property 'title' does not exist on type 'IntrinsicAttributes & PageHeaderProps'.
client/src/pages/admin/user-bulk-upload.tsx(113,9): error TS2322: Type '{ title: string; subtitle: string; actions: Element; }' is not assignable to type 'IntrinsicAttributes & PageHeaderProps'.
  Property 'title' does not exist on type 'IntrinsicAttributes & PageHeaderProps'.
client/src/pages/chapters.tsx(50,24): error TS2802: Type 'Set<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
client/src/pages/practice.tsx(46,24): error TS2802: Type 'Set<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
client/src/pages/practice.tsx(48,11): error TS2802: Type 'Set<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/pg-storage.ts(166,43): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { role: "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent" | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 17 more ...; deletedBy?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ active: boolean; role: "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent"; name: string; email: string; password: string; section?: string | null | undefined; ... 12 more ...; deletedBy?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ role: "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent" | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 17 more ...; deletedBy?: string | ... 3 more ... | undefined; }'.
      Types of property 'subjects' are incompatible.
        Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'string | undefined'.
  Overload 2 of 2, '(values: { role: "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent" | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 17 more ...; deletedBy?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'active' does not exist in type '{ role: "super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent" | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 17 more ...; deletedBy?: string | ... 3 more ... | undefined; }[]'.
server/pg-storage.ts(270,47): error TS2769: No overload matches this call.
  Overload 1 of 3, '(left: PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; ... 9 more ...; generated: undefined; }, {}, { ...; }>, right: "mcq" | ... 6 more ... | "matching"): SQL<...>', gave the following error.
    Argument of type 'string' is not assignable to parameter of type '"mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | SQLWrapper | "matching"'.
  Overload 2 of 3, '(left: Aliased<string>, right: string | SQLWrapper): SQL<unknown>', gave the following error.
    Argument of type 'PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; ... 9 more ...; generated: undefined; }, {}, { ...; }>' is not assignable to parameter of type 'Aliased<string>'.
      Type 'PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; ... 9 more ...; generated: undefined; }, {}, { ...; }>' is missing the following properties from type 'Aliased<string>': sql, fieldAlias
  Overload 3 of 3, '(left: never, right: unknown): SQL<unknown>', gave the following error.
    Argument of type 'PgColumn<{ name: "type"; tableName: "questions"; dataType: "string"; columnType: "PgText"; data: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; ... 9 more ...; generated: undefined; }, {}, { ...; }>' is not assignable to parameter of type 'never'.
server/pg-storage.ts(304,49): error TS2802: Type 'Map<string, { id: string; content: string; type: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; subject: string; chapter: string; marks: number | null; ... 24 more ...; rejectionReason: string | null; }[]>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/pg-storage.ts(833,60): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { name: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 16 more ...; lockedBy?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ name: string; subject: string; grade: string; tenantId: string; totalMarks: number; isDeleted?: boolean | null | undefined; deletedAt?: Date | null | undefined; deletedBy?: string | null | undefined; ... 10 more ...; lockedBy?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ name: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 16 more ...; lockedBy?: string | ... 3 more ... | undefined; }'.
      Types of property 'sections' are incompatible.
        Type '{ [x: number]: { name: string; marks: number; questionCount: number; questionType: string; difficulty?: unknown; chapters?: unknown; instructions?: unknown; }; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | ...' is not assignable to type 'SQL<unknown> | BlueprintSection[] | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: { name: string; marks: number; questionCount: number; questionType: string; difficulty?: unknown; chapters?: unknown; instructions?: unknown; }; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | ...' is not assignable to type 'SQL<unknown> | BlueprintSection[] | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: { name: string; marks: number; questionCount: number; questionType: string; difficulty?: unknown; chapters?: unknown; instructions?: unknown; }; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | ...' is not assignable to type 'BlueprintSection[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'BlueprintSection | undefined'.
  Overload 2 of 2, '(values: { name: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 16 more ...; lockedBy?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ name: string; subject: string; grade: string; tenantId: string; totalMarks: number; isDeleted?: boolean | null | undefined; deletedAt?: Date | null | undefined; deletedBy?: string | null | undefined; ... 10 more ...; lockedBy?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ name: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 16 more ...; lockedBy?: string | ... 3 more ... | undefined; }[]'.
      Type '{ name: string; subject: string; grade: string; tenantId: string; totalMarks: number; isDeleted?: boolean | null | undefined; deletedAt?: Date | null | undefined; deletedBy?: string | null | undefined; ... 10 more ...; lockedBy?: string | ... 1 more ... | undefined; }' is missing the following properties from type '{ name: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 16 more ...; lockedBy?: string | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(859,63): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { questionId: string | SQL<unknown> | Placeholder<string, any>; reviewerId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; status?: "pending" | ... 5 more ... | undefined; reviewedAt?: SQL<...> | ... 3 more ... | undefined; comments?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Type 'string' is not assignable to type '"pending" | SQL<unknown> | "rejected" | "approved" | Placeholder<string, any> | null | undefined'.
  Overload 2 of 2, '(values: { questionId: string | SQL<unknown> | Placeholder<string, any>; reviewerId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; status?: "pending" | ... 5 more ... | undefined; reviewedAt?: SQL<...> | ... 3 more ... | undefined; comments?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'questionId' does not exist in type '{ questionId: string | SQL<unknown> | Placeholder<string, any>; reviewerId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; status?: "pending" | ... 5 more ... | undefined; reviewedAt?: SQL<...> | ... 3 more ... | undefined; comments?: string | ... 3 more ...'.
server/pg-storage.ts(1048,62): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; examId: string; toState: string; actorId: string; actorRole: string; comments?: string | null | undefined; fromState?: any; timestamp?: Date | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }'.
      Types of property 'toState' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "active" | "draft" | "locked" | "submitted" | "pending_hod" | "hod_approved" | "hod_rejected" | "pending_principal" | "principal_approved" | "principal_rejected" | "sent_to_committee" | "archived" | Placeholder<...>'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; examId: string; toState: string; actorId: string; actorRole: string; comments?: string | null | undefined; fromState?: any; timestamp?: Date | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }[]'.
      Type '{ tenantId: string; examId: string; toState: string; actorId: string; actorRole: string; comments?: string | null | undefined; fromState?: any; timestamp?: Date | undefined; }' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; examId: string | SQL<unknown> | Placeholder<string, any>; toState: SQL<unknown> | "active" | ... 11 more ... | Placeholder<...>; ... 5 more ...; timestamp?: SQL<...> | ... 2 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1144,76): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { title: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ title: string; type: string; tenantId: string; message: string; studentId: string; createdAt?: Date | null | undefined; testId?: string | null | undefined; attemptId?: string | null | undefined; isRead?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ title: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }'.
      Types of property 'type' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { title: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ title: string; type: string; tenantId: string; message: string; studentId: string; createdAt?: Date | null | undefined; testId?: string | null | undefined; attemptId?: string | null | undefined; isRead?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ title: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }[]'.
      Type '{ title: string; type: string; tenantId: string; message: string; studentId: string; createdAt?: Date | null | undefined; testId?: string | null | undefined; attemptId?: string | null | undefined; isRead?: boolean | ... 1 more ... | undefined; }' is missing the following properties from type '{ title: string | SQL<unknown> | Placeholder<string, any>; type: SQL<unknown> | "test_unlocked" | "exam_submitted" | "result_published" | Placeholder<string, any>; ... 7 more ...; isRead?: boolean | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1473,60): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<...> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }'.
      Types of property 'gradeGroup' are incompatible.
        Type 'string | null | undefined' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
          Type 'string' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
  Overload 2 of 2, '(values: { grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<...> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }[]'.
      Type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }' is missing the following properties from type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1479,49): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<...> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }[]' is not assignable to parameter of type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }'.
      Type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }[]' is missing the following properties from type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }': grade, tenantId, academicYearId
  Overload 2 of 2, '(values: { grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<...> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }[]' is not assignable to parameter of type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }[]'.
      Type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }' is not assignable to type '{ grade: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<...>; ... 4 more ...; gradeGroup?: SQL<...> | ... 5 more ... | undefined; }'.
        Types of property 'gradeGroup' are incompatible.
          Type 'string | null | undefined' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
            Type 'string' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any> | null | undefined'.
server/pg-storage.ts(1613,62): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; gradeGroup: string; examName: string; createdAt?: Date | null | undefined; createdBy?: string | null | undefined; isActive?: boolean | null | undefined; ... 8 more ...; isVisible?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }'.
      Types of property 'gradeGroup' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; gradeGroup: string; examName: string; createdAt?: Date | null | undefined; createdBy?: string | null | undefined; isActive?: boolean | null | undefined; ... 8 more ...; isVisible?: boolean | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }[]'.
      Type '{ tenantId: string; academicYearId: string; gradeGroup: string; examName: string; createdAt?: Date | null | undefined; createdBy?: string | null | undefined; isActive?: boolean | null | undefined; ... 8 more ...; isVisible?: boolean | ... 1 more ... | undefined; }' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; gradeGroup: SQL<unknown> | "primary" | "middle" | "senior" | Placeholder<...>; ... 13 more ...; isVisible?: boolean | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1641,65): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; isBlueprintMandatory?: boolean | null | undefined; blueprintMode?: string | null | undefined; allowEditAfterLock?: boolean | null | undefined; createdAt?: Date | ... 1 more ... | undefined; updatedAt?: Date | ... 1 more ... | undefined; updatedBy?: string | ... 1 more ... ...' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }'.
      Types of property 'blueprintMode' are incompatible.
        Type 'string | null | undefined' is not assignable to type 'SQL<unknown> | "academic_year" | "exam_specific" | Placeholder<string, any> | null | undefined'.
          Type 'string' is not assignable to type 'SQL<unknown> | "academic_year" | "exam_specific" | Placeholder<string, any> | null | undefined'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ tenantId: string; academicYearId: string; isBlueprintMandatory?: boolean | null | undefined; blueprintMode?: string | null | undefined; allowEditAfterLock?: boolean | null | undefined; createdAt?: Date | ... 1 more ... | undefined; updatedAt?: Date | ... 1 more ... | undefined; updatedBy?: string | ... 1 more ... ...' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }[]'.
      Type '{ tenantId: string; academicYearId: string; isBlueprintMandatory?: boolean | null | undefined; blueprintMode?: string | null | undefined; allowEditAfterLock?: boolean | null | undefined; createdAt?: Date | ... 1 more ... | undefined; updatedAt?: Date | ... 1 more ... | undefined; updatedBy?: string | ... 1 more ... ...' is missing the following properties from type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; id?: string | SQL<unknown> | Placeholder<...> | undefined; ... 5 more ...; updatedBy?: string | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1676,64): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { title: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ title: string; subject: string; grade: string; tenantId: string; referenceType: string; fileUrl: string; description?: string | null | undefined; isDeleted?: boolean | null | undefined; deletedAt?: Date | ... 1 more ... | undefined; ... 7 more ...; year?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ title: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }'.
      Types of property 'referenceType' are incompatible.
        Type 'string' is not assignable to type 'SQL<unknown> | "question_paper" | "notes" | "model_answer" | "study_material" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { title: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<...>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ title: string; subject: string; grade: string; tenantId: string; referenceType: string; fileUrl: string; description?: string | null | undefined; isDeleted?: boolean | null | undefined; deletedAt?: Date | ... 1 more ... | undefined; ... 7 more ...; year?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ title: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }[]'.
      Type '{ title: string; subject: string; grade: string; tenantId: string; referenceType: string; fileUrl: string; description?: string | null | undefined; isDeleted?: boolean | null | undefined; deletedAt?: Date | ... 1 more ... | undefined; ... 7 more ...; year?: string | ... 1 more ... | undefined; }' is missing the following properties from type '{ title: string | SQL<unknown> | Placeholder<string, any>; subject: string | SQL<unknown> | Placeholder<string, any>; grade: string | SQL<unknown> | Placeholder<string, any>; ... 14 more ...; year?: string | ... 3 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1703,68): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { action: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<...>; ... 5 more ...; generatedAt?: SQL<...> | ... 2 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ action: string; tenantId: string; testId: string; userRole: string; setNumber: number; generatedBy: string; metadata?: { [x: string]: [any, ...any[]]; } | null | undefined; generatedAt?: Date | undefined; }' is not assignable to parameter of type '{ action: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<...>; ... 5 more ...; generatedAt?: SQL<...> | ... 2 more ... | undefined; }'.
      Types of property 'userRole' are incompatible.
        Type 'string' is not assignable to type '"super_admin" | "admin" | "hod" | "principal" | "exam_committee" | "teacher" | "student" | "parent" | SQL<unknown> | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { action: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<...>; ... 5 more ...; generatedAt?: SQL<...> | ... 2 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ action: string; tenantId: string; testId: string; userRole: string; setNumber: number; generatedBy: string; metadata?: { [x: string]: [any, ...any[]]; } | null | undefined; generatedAt?: Date | undefined; }' is not assignable to parameter of type '{ action: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<...>; ... 5 more ...; generatedAt?: SQL<...> | ... 2 more ... | undefined; }[]'.
      Type '{ action: string; tenantId: string; testId: string; userRole: string; setNumber: number; generatedBy: string; metadata?: { [x: string]: [any, ...any[]]; } | null | undefined; generatedAt?: Date | undefined; }' is missing the following properties from type '{ action: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<string, any>; testId: string | SQL<unknown> | Placeholder<...>; ... 5 more ...; generatedAt?: SQL<...> | ... 2 more ... | undefined; }[]': length, pop, push, concat, and 35 more.
server/pg-storage.ts(1785,57): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; logoUrl?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ isActive: boolean; isDeleted: false; tenantId: string; academicYearId: string; examName: string; wing: string; deletedAt?: Date | null | undefined; deletedBy?: string | null | undefined; ... 9 more ...; logoUrl?: string | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; logoUrl?: string | ... 3 more ... | undefined; }'.
      Types of property 'wing' are incompatible.
        Type 'string' is not assignable to type '"secondary" | SQL<unknown> | "primary" | "middle" | "senior_secondary" | Placeholder<string, any>'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; logoUrl?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'isActive' does not exist in type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; academicYearId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<...> | Placeholder<...>; ... 15 more ...; logoUrl?: string | ... 3 more ... | undefined; }[]'.
server/pg-storage.ts(1882,52): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { name: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ isActive: boolean; isDeleted: false; name: string; displayName: string; tenantId: string; createdAt?: Date | null | undefined; updatedAt?: Date | null | undefined; grades?: { ...; } | null | undefined; sortOrder?: number | ... 1 more ... | undefined; }' is not assignable to parameter of type '{ name: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }'.
      Types of property 'grades' are incompatible.
        Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'string | undefined'.
  Overload 2 of 2, '(values: { name: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'isActive' does not exist in type '{ name: string | SQL<unknown> | Placeholder<string, any>; displayName: string | SQL<unknown> | Placeholder<string, any>; tenantId: string | SQL<unknown> | Placeholder<...>; ... 6 more ...; sortOrder?: number | ... 3 more ... | undefined; }[]'.
server/pg-storage.ts(1941,52): error TS2769: No overload matches this call.
  Overload 1 of 2, '(value: { tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 15 more ...; pageSize?: string | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ isActive: boolean; isDeleted: false; tenantId: string; wingId: string; examName: string; academicYear: string; subjects?: { [x: number]: string; length: number; toString: () => string; toLocaleString: { ...; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined; ... 10 more ...; pageSiz...' is not assignable to parameter of type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 15 more ...; pageSize?: string | ... 3 more ... | undefined; }'.
      Types of property 'subjects' are incompatible.
        Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; } | null | undefined' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
          Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[] | SQL<unknown> | Placeholder<string, any> | null | undefined'.
            Type '{ [x: number]: string; length: number; toString: () => string; toLocaleString: { (): string; (locales: string | string[], options?: (NumberFormatOptions & DateTimeFormatOptions) | undefined): string; }; ... 37 more ...; readonly [Symbol.unscopables]: { ...; }; }' is not assignable to type 'string[]'.
              The types returned by 'pop()' are incompatible between these types.
                Type 'unknown' is not assignable to type 'string | undefined'.
  Overload 2 of 2, '(values: { tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 15 more ...; pageSize?: string | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'isActive' does not exist in type '{ tenantId: string | SQL<unknown> | Placeholder<string, any>; wingId: string | SQL<unknown> | Placeholder<string, any>; examName: string | SQL<unknown> | Placeholder<...>; ... 15 more ...; pageSize?: string | ... 3 more ... | undefined; }[]'.
server/routes.ts(1089,36): error TS2339: Property 'getUpload' does not exist on type 'IStorage'.
server/routes.ts(1829,37): error TS7016: Could not find a declaration file for module 'node-fetch'. '/app/node_modules/node-fetch/lib/index.js' implicitly has an 'any' type.
  Try `npm i --save-dev @types/node-fetch` if it exists or add a new declaration (.d.ts) file containing `declare module 'node-fetch';`
server/routes.ts(1866,37): error TS7016: Could not find a declaration file for module 'node-fetch'. '/app/node_modules/node-fetch/lib/index.js' implicitly has an 'any' type.
  Try `npm i --save-dev @types/node-fetch` if it exists or add a new declaration (.d.ts) file containing `declare module 'node-fetch';`
server/routes.ts(2763,40): error TS2802: Type 'Map<string, { passage: any; questions: { id: string; content: string; type: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; subject: string; ... 26 more ...; rejectionReason: string | null; }[]; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/routes.ts(2944,40): error TS2802: Type 'Map<string, { passage: any; questions: { id: string; content: string; type: "mcq" | "true_false" | "fill_blank" | "short_answer" | "long_answer" | "numerical" | "matching"; subject: string; ... 26 more ...; rejectionReason: string | null; }[]; }>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/routes.ts(3362,20): error TS2322: Type 'string' is not assignable to type '[any, ...any[]]'.
server/routes.ts(3393,20): error TS2322: Type 'string' is not assignable to type '[any, ...any[]]'.
server/routes.ts(3512,38): error TS2339: Property 'getSubmission' does not exist on type 'IStorage'.
server/routes.ts(3529,38): error TS2339: Property 'getSubmission' does not exist on type 'IStorage'.
server/routes.ts(3822,9): error TS2322: Type 'Date' is not assignable to type 'string'.
server/routes.ts(3823,9): error TS2322: Type 'Date' is not assignable to type 'string'.
server/routes.ts(3918,9): error TS2353: Object literal may only specify known properties, and 'id' does not exist in type '{ grade: string; tenantId: string; academicYearId: string; displayName?: string | null | undefined; createdAt?: Date | null | undefined; isActive?: boolean | null | undefined; gradeGroup?: string | ... 1 more ... | undefined; }'.
server/routes.ts(4057,37): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(4064,35): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(4089,35): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(4182,36): error TS2339: Property 'getUpload' does not exist on type 'IStorage'.
server/routes.ts(4497,35): error TS2307: Cannot find module 'bcryptjs' or its corresponding type declarations.
server/routes.ts(4644,64): error TS2345: Argument of type 'string | null' is not assignable to parameter of type 'string'.
  Type 'null' is not assignable to type 'string'.
server/routes.ts(4655,54): error TS2345: Argument of type 'string | null' is not assignable to parameter of type 'string'.
  Type 'null' is not assignable to type 'string'.
server/routes.ts(4728,46): error TS2339: Property 'isDeleted' does not exist on type '{ address: string | null; code: string; id: string; name: string; email: string | null; active: boolean | null; logo: string | null; principalName: string | null; city: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(4735,27): error TS2339: Property 'principalEmail' does not exist on type '{ address: string | null; code: string; id: string; name: string; email: string | null; active: boolean | null; logo: string | null; principalName: string | null; city: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(4736,27): error TS2551: Property 'principalPhone' does not exist on type '{ address: string | null; code: string; id: string; name: string; email: string | null; active: boolean | null; logo: string | null; principalName: string | null; city: string | null; ... 9 more ...; userCodeCounter: number | null; }'. Did you mean 'principalName'?
server/routes.ts(4738,22): error TS2339: Property 'createdAt' does not exist on type '{ address: string | null; code: string; id: string; name: string; email: string | null; active: boolean | null; logo: string | null; principalName: string | null; city: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(4763,9): error TS2353: Object literal may only specify known properties, and 'principalEmail' does not exist in type '{ code: string; name: string; address?: string | null | undefined; email?: string | null | undefined; active?: boolean | null | undefined; logo?: string | null | undefined; principalName?: string | ... 1 more ... | undefined; ... 10 more ...; userCodeCounter?: number | ... 1 more ... | undefined; }'.
server/routes.ts(4967,32): error TS2339: Property 'isDeleted' does not exist on type '{ address: string | null; code: string; id: string; name: string; email: string | null; active: boolean | null; logo: string | null; principalName: string | null; city: string | null; ... 9 more ...; userCodeCounter: number | null; }'.
server/routes.ts(5010,50): error TS2345: Argument of type 'string | null' is not assignable to parameter of type 'string'.
  Type 'null' is not assignable to type 'string'.
server/routes.ts(5360,37): error TS2551: Property 'getTenants' does not exist on type 'IStorage'. Did you mean 'getTenant'?
server/routes.ts(5361,44): error TS7006: Parameter 's' implicitly has an 'any' type. to list all errors. Many are in the original codebase (e.g., ).
  - **Why to solve this issue and what will be achieved with this?** Ensures a stable build and improves long-term maintainability.
  - **Should Test frontend/backend/both after fix:** Frontend.
  - **Is recurring issue?** Y

**Known issue recurrence from previous fork**
- **Database service persistence:** The PostgreSQL service in the preview environment is not persistent and is lost on container restart. The agent had to reinstall and re-seed the database multiple times during this session. This is an expected environmental issue.

**Code Architecture**


**Key Technical Concepts**
*   **Frontend:** React, TypeScript, Vite, Tailwind CSS, Shadcn UI
*   **Backend:**
    *   **Main Service:** Node.js, Express.js
    *   **Parser Service (PDF):** Python, FastAPI
    *   **Word Parser (Script):** Python with  library
*   **Database:** PostgreSQL with Drizzle ORM
*   **AI:** OpenAI GPT-4 Vision (for the secondary PDF parsing feature)

**key DB schema**
- ****: Now populated with over 1,002 questions for Class 12 CS. Key columns include , , , , , , , .
- ****, ****, ****: Populated with the new school and staff accounts.

**All files of reference**
*   : **(NEW)** The critical script created to parse table-formatted  files and upload questions in bulk.
*   : **(MODIFIED)** The frontend for the AI parser, which was fixed to use the correct proxy endpoint.
*   : **(MODIFIED)** The main Express router where the proxy middleware for the Python parser service was added.
*   : The data access layer used to bulk-insert the questions into the database.
*   : Supervisor config for the Python FastAPI PDF parser service.

**Areas that need refactoring**:
- The standalone script  should be integrated into a permanent Super Admin API endpoint for future bulk uploads.
- The old admin pages at  are obsolete and should be removed.

**key api endpoints**
*   : (POST) The endpoint used to upload questions in large batches to the database.
*   : (POST) The proxy endpoint for the AI PDF parser.

**Critical Info for New Agent**
*   **Environment is Volatile:** The PostgreSQL database is **not persistent** across container restarts. If you encounter database connection errors, you will need to reinstall PostgreSQL, create the database/user, and re-run the seeding/setup scripts. This happened multiple times in the last session.
*   **Word Parsing is Primary:** The user prefers the fast  parsing method. The AI PDF parser is now a secondary tool. The script  contains the logic for parsing the user's specific table-based Word format.
*   **Immediate Task:** The agent's first priority is to investigate and answer the user's question about which question types are allowed in mock tests versus other exam types.
*   **Upcoming Bulk Task:** The user will provide a list of ~300 students to create accounts for. Be prepared for another bulk creation task.

**documents and test reports created in this job**
*   : Script for parsing  files.
*   Parsing logs were created in the root directory (e.g., ) but can be considered transient.

**Last 10 User Messages and any pending HUMAN messages**
1.  **User:** Asks agent to do the background processing (Option A) for PDFs and provides updated names for the Principal, HOD, and Teacher.
2.  **Agent:** Confirms the name updates and starts the background PDF parsing.
3.  **(Agent encounters container reset, restores environment, restarts parsing)**
4.  **User:** Asks if providing Word documents would be easier/faster.
5.  **Agent:** Confirms that Word docs would be significantly faster and cheaper to process.
6.  **User:** Uploads 4 Word documents and asks the agent to check if they are proper.
7.  **Agent:** Analyzes the Word docs, confirms they are perfect, and recommends stopping the slow PDF parsing.
8.  **User:** Agrees, tells the agent to stop PDF parsing and use the Word documents. Mentions a parser might already exist in the teacher's panel.
9.  **Agent:** Stops PDF parsing, confirms a Word parser exists but is not suitable for the new format, builds a custom parser, extracts 1,162 questions, and uploads 1,002 to the database successfully.
10. **User:** Hope only objective type questions are allowed in mock test and chapter and lesson tests. **(PENDING RESPONSE)**

**Project Health Check:**
*   **Broken:** The PostgreSQL service within the preview environment is volatile and requires re-installation on container reset. This is a known environmental constraint.
*   **Mocked:** None. The application is fully driven by the PostgreSQL database.

**3rd Party Integrations**
*   **OpenAI GPT-4 Vision:** Integrated for the PDF parser, but this is now a secondary feature. Requires a user-provided API key.
*   **python-docx:** A Python library used for the new, primary Word document parsing functionality. It is installed locally and does not require a key.

**Testing status**
- **Testing agent used after significant changes:** NO. The bulk upload was a new, scripted task.
- **Troubleshoot agent used after agent stuck in loop:** NO.
- **Test files created:** None.
- **Known regressions:** None.

**Credentials to test flow:**
*   **Role: Super Admin**
    *   **Email:** 
    *   **Password:** 
*   **Role: Principal (Maharishi Vidya Mandir)**
    *   **Email:** 
    *   **Password:** 
*   **Role: HOD - Computer Science (Maharishi Vidya Mandir)**
    *   **Email:** 
    *   **Password:** 
*   **Role: Teacher - Computer Science (Maharishi Vidya Mandir)**
    *   **Email:** 
    *   **Password:** 

**What agent forgot to execute**
The agent has correctly prioritized all user requests and has not forgotten any critical tasks. Backlog items like cleaning up old pages and fixing TypeScript errors were appropriately deferred.</analysis>
